<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–° –ù–æ–≤—ã–º –≥–æ–¥–æ–º!</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&family=Spectral:ital,wght@0,400;0,500;1,400&display=swap"
        rel="stylesheet">

    <style>
        :root {
            --night-deep: #0a0a1a;
            --night-mid: #141428;
            --night-light: #1e1e3f;
            --aurora-pink: #ff6b9d;
            --aurora-purple: #c44dff;
            --aurora-blue: #4dc3ff;
            --aurora-teal: #4dffd2;
            --gold-warm: #ffd700;
            --gold-soft: #ffe566;
            --snow-white: #ffffff;
            --snow-soft: #e8f0ff;
            --text-light: rgba(255, 255, 255, 0.9);
            --text-muted: rgba(255, 255, 255, 0.6);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html,
        body {
            height: 100%;
            overflow: hidden;
            touch-action: manipulation;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: var(--night-deep);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        /* Main container */
        .card-container {
            width: 100%;
            max-width: 440px;
            height: 100vh;
            max-height: 900px;
            position: relative;
            overflow: hidden;
            background: linear-gradient(180deg,
                    var(--night-deep) 0%,
                    var(--night-mid) 30%,
                    var(--night-light) 70%,
                    #252550 100%);
        }

        /* Aurora background effect */
        .aurora {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 60%;
            background:
                radial-gradient(ellipse 80% 50% at 20% 20%, rgba(77, 195, 255, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse 60% 40% at 70% 30%, rgba(196, 77, 255, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse 70% 35% at 50% 10%, rgba(255, 107, 157, 0.1) 0%, transparent 50%);
            animation: auroraMove 15s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes auroraMove {

            0%,
            100% {
                transform: translateX(0) scale(1);
                opacity: 0.8;
            }

            25% {
                transform: translateX(30px) scale(1.05);
                opacity: 1;
            }

            50% {
                transform: translateX(-20px) scale(1.02);
                opacity: 0.9;
            }

            75% {
                transform: translateX(15px) scale(1.08);
                opacity: 1;
            }
        }

        /* Stars background */
        .stars {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle var(--duration) ease-in-out infinite;
            animation-delay: var(--delay);
        }

        @keyframes twinkle {

            0%,
            100% {
                opacity: 0.3;
                transform: scale(1);
            }

            50% {
                opacity: 1;
                transform: scale(1.3);
            }
        }

        /* Screens */
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 24px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.6s ease, transform 0.6s ease;
            transform: scale(0.95);
        }

        .screen.active {
            opacity: 1;
            visibility: visible;
            transform: scale(1);
        }

        /* Typography */
        .title-handwritten {
            font-family: 'Caveat', cursive;
            font-size: clamp(2.5rem, 10vw, 4rem);
            font-weight: 600;
            color: var(--snow-white);
            text-align: center;
            text-shadow: 0 0 30px rgba(255, 107, 157, 0.5);
            line-height: 1.1;
        }

        .subtitle {
            font-family: 'Spectral', serif;
            font-size: 1.15rem;
            color: var(--text-muted);
            text-align: center;
            margin-top: 12px;
            font-style: italic;
        }

        .text-glow {
            text-shadow: 0 0 20px currentColor;
        }

        /* Buttons */
        .btn-magic {
            margin-top: 30px;
            background: linear-gradient(135deg, var(--aurora-pink) 0%, var(--aurora-purple) 100%);
            border: none;
            padding: 18px 45px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            color: white;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow:
                0 4px 25px rgba(255, 107, 157, 0.4),
                0 0 50px rgba(196, 77, 255, 0.2);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            position: relative;
            overflow: hidden;
        }

        .btn-magic::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }

        .btn-magic:hover::before {
            left: 100%;
        }

        .btn-magic:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow:
                0 8px 35px rgba(255, 107, 157, 0.5),
                0 0 60px rgba(196, 77, 255, 0.3);
        }

        .btn-magic:active {
            transform: translateY(0) scale(0.98);
        }

        .btn-secondary {
            background: transparent;
            border: 2px solid var(--aurora-blue);
            color: var(--aurora-blue);
            padding: 14px 35px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: var(--aurora-blue);
            color: var(--night-deep);
            box-shadow: 0 0 30px rgba(77, 195, 255, 0.5);
        }

        /* ===== SCREEN 1: Welcome ===== */
        .welcome-icon {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: float 3s ease-in-out infinite;
            filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5));
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-15px);
            }
        }

        .for-name {
            font-family: 'Caveat', cursive;
            font-size: 1.8rem;
            color: var(--aurora-teal);
            margin: 20px 0 30px;
        }

        .welcome-hint {
            position: absolute;
            bottom: 80px;
            font-size: 0.9rem;
            color: var(--text-muted);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 0.5;
            }

            50% {
                opacity: 1;
            }
        }

        /* ===== SCREEN 2: Snowflake Game ===== */
        .game-area {
            position: relative;
            width: 100%;
            height: 60%;
            margin: 20px 0;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 15px;
        }

        .score-display {
            font-family: 'Caveat', cursive;
            font-size: 1.5rem;
            color: var(--gold-warm);
        }

        .timer-display {
            font-size: 1.2rem;
            color: var(--aurora-blue);
            font-weight: 600;
        }

        .catchable-snowflake {
            position: absolute;
            font-size: 2.5rem;
            cursor: pointer;
            transition: transform 0.2s ease;
            animation: snowfallGame linear forwards;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.8));
            user-select: none;
        }

        @keyframes snowfallGame {
            0% {
                transform: translateY(-50px) rotate(0deg);
            }

            100% {
                transform: translateY(calc(100% + 50px)) rotate(360deg);
            }
        }

        .catchable-snowflake:hover {
            transform: scale(1.3);
        }

        .caught-effect {
            position: absolute;
            font-size: 1.5rem;
            pointer-events: none;
            animation: burstUp 0.8s ease-out forwards;
        }

        @keyframes burstUp {
            0% {
                transform: scale(1) translateY(0);
                opacity: 1;
            }

            100% {
                transform: scale(1.5) translateY(-60px);
                opacity: 0;
            }
        }

        .game-instruction {
            font-size: 1rem;
            color: var(--text-muted);
            text-align: center;
            margin-top: 10px;
        }

        /* ===== SCREEN 3: Gift Boxes ===== */
        .gifts-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
            width: 100%;
            max-width: 320px;
        }

        .gift-box {
            aspect-ratio: 1;
            background: linear-gradient(145deg, #2a2a5a 0%, #1a1a3a 100%);
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .gift-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg,
                    var(--aurora-pink) 0%,
                    var(--aurora-purple) 50%,
                    var(--aurora-blue) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .gift-box:hover::before {
            opacity: 0.2;
        }

        .gift-box:hover {
            transform: translateY(-8px) scale(1.05);
            border-color: var(--aurora-purple);
            box-shadow: 0 15px 40px rgba(196, 77, 255, 0.3);
        }

        .gift-box.opened {
            background: linear-gradient(145deg, #3a3a6a 0%, #2a2a4a 100%);
            border-color: var(--aurora-teal);
        }

        .gift-box.opened::after {
            content: '‚úì';
            position: absolute;
            top: 5px;
            right: 8px;
            font-size: 0.8rem;
            color: var(--aurora-teal);
        }

        .gift-emoji {
            font-size: 2.5rem;
            position: relative;
            z-index: 1;
            transition: transform 0.3s ease;
        }

        .gift-box:hover .gift-emoji {
            transform: scale(1.2) rotate(-5deg);
        }

        .gift-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 8px;
            position: relative;
            z-index: 1;
        }

        .gifts-progress {
            font-family: 'Caveat', cursive;
            font-size: 1.4rem;
            color: var(--gold-warm);
            margin-top: 20px;
        }

        /* ===== SCREEN 4: Wish Reveal ===== */
        .wish-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 40px 30px;
            max-width: 340px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: cardAppear 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes cardAppear {
            0% {
                transform: scale(0.5) rotateY(90deg);
                opacity: 0;
            }

            100% {
                transform: scale(1) rotateY(0);
                opacity: 1;
            }
        }

        .wish-emoji-large {
            font-size: 4rem;
            margin-bottom: 20px;
            display: block;
            animation: bounce 1s ease-in-out infinite;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .wish-text {
            font-family: 'Spectral', serif;
            font-size: 1.25rem;
            color: var(--snow-white);
            line-height: 1.8;
            font-style: italic;
        }

        /* ===== SCREEN 5: Lucky Stars ===== */
        .stars-collected {
            display: flex;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
            justify-content: center;
        }

        .star-slot {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.05);
            border: 2px dashed rgba(255, 215, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .star-slot.filled {
            border: 2px solid var(--gold-warm);
            background: rgba(255, 215, 0, 0.1);
            box-shadow: 0 0 25px rgba(255, 215, 0, 0.4);
            animation: starPop 0.5s ease;
        }

        @keyframes starPop {
            0% {
                transform: scale(0);
            }

            50% {
                transform: scale(1.3);
            }

            100% {
                transform: scale(1);
            }
        }

        .luck-meter {
            width: 100%;
            max-width: 280px;
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            overflow: hidden;
            margin: 20px 0;
        }

        .luck-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--aurora-pink), var(--aurora-purple), var(--aurora-blue));
            border-radius: 6px;
            transition: width 0.5s ease;
            box-shadow: 0 0 15px var(--aurora-purple);
        }

        .luck-label {
            font-size: 1rem;
            color: var(--text-muted);
            margin-bottom: 10px;
        }

        /* ===== SCREEN 6: Final Message ===== */
        .final-content {
            text-align: center;
        }

        .cities-connection {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }

        .city-marker {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .city-icon {
            font-size: 2.5rem;
            animation: float 3s ease-in-out infinite;
        }

        .city-icon:nth-child(2) {
            animation-delay: 0.5s;
        }

        .city-name {
            font-family: 'Caveat', cursive;
            font-size: 1.3rem;
            color: var(--snow-soft);
        }

        .connection-line {
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, var(--aurora-pink), var(--aurora-teal));
            border-radius: 2px;
            position: relative;
        }

        .connection-line::before {
            content: 'üíå';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            animation: travelHeart 2s ease-in-out infinite;
        }

        @keyframes travelHeart {

            0%,
            100% {
                left: 10%;
            }

            50% {
                left: 90%;
            }
        }

        .final-message {
            font-family: 'Spectral', serif;
            font-size: 1.3rem;
            color: var(--snow-white);
            line-height: 2;
            max-width: 300px;
            margin: 20px auto;
        }

        .signature {
            font-family: 'Caveat', cursive;
            font-size: 1.8rem;
            color: var(--aurora-pink);
            margin-top: 30px;
        }

        .final-year {
            font-family: 'Caveat', cursive;
            font-size: 4rem;
            background: linear-gradient(135deg, var(--gold-warm), var(--aurora-pink), var(--aurora-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-top: 20px;
            filter: drop-shadow(0 0 20px rgba(255, 107, 157, 0.5));
        }

        /* Fireworks */
        .fireworks-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 1000;
        }

        .firework-particle {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            animation: explode 1.5s ease-out forwards;
        }

        @keyframes explode {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }

            100% {
                transform: translate(var(--dx), var(--dy)) scale(0);
                opacity: 0;
            }
        }

        /* Modal for wishes */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 10, 26, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 500;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
            backdrop-filter: blur(10px);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            transform: scale(0.8);
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .modal-overlay.active .modal-content {
            transform: scale(1);
        }

        /* Snowfall */
        .snowfall {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            overflow: hidden;
        }

        .snow-particle {
            position: absolute;
            color: rgba(255, 255, 255, 0.6);
            animation: snowfallBg linear infinite;
            font-size: var(--size);
        }

        @keyframes snowfallBg {
            0% {
                transform: translateY(-20px) rotate(0deg);
            }

            100% {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        /* Progress indicator */
        .progress-dots {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
        }

        .progress-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .progress-dot.active {
            background: var(--aurora-pink);
            box-shadow: 0 0 15px var(--aurora-pink);
        }

        .progress-dot.completed {
            background: var(--aurora-teal);
        }

        /* ===== Timeline Styles ===== */
        .timeline-wrapper {
            width: 100%;
            max-width: 340px;
            max-height: 55vh;
            overflow-y: auto;
            padding: 15px;
            scrollbar-width: thin;
            scrollbar-color: var(--aurora-pink) transparent;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .timeline-wrapper::-webkit-scrollbar {
            width: 4px;
        }

        .timeline-wrapper::-webkit-scrollbar-thumb {
            background: var(--aurora-pink);
            border-radius: 2px;
        }

        /* Milestone - special highlighted event */
        .timeline-milestone {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.25), rgba(196, 77, 255, 0.25));
            border: 2px solid var(--aurora-pink);
            border-radius: 16px;
            padding: 15px 20px;
            margin: 15px 0;
            position: relative;
            box-shadow: 0 0 20px rgba(255, 107, 157, 0.3);
        }

        .milestone-date {
            font-size: 0.85rem;
            color: var(--aurora-pink);
            font-weight: 600;
            margin-bottom: 8px;
        }

        .milestone-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .milestone-icon {
            font-size: 1.8rem;
            animation: pulse 2s ease-in-out infinite;
        }

        .milestone-text {
            font-family: 'Caveat', cursive;
            font-size: 1.5rem;
            color: var(--snow-white);
            text-shadow: 0 0 10px rgba(255, 107, 157, 0.5);
        }

        .timeline {
            position: relative;
            padding-left: 30px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg, var(--aurora-pink), var(--aurora-purple), var(--aurora-teal));
        }

        .timeline-month {
            margin-bottom: 20px;
        }

        .timeline-month-label {
            font-family: 'Caveat', cursive;
            font-size: 1.4rem;
            color: var(--aurora-teal);
            margin-bottom: 12px;
            position: relative;
        }

        .timeline-month-label::before {
            content: '';
            position: absolute;
            left: -26px;
            top: 50%;
            transform: translateY(-50%);
            width: 12px;
            height: 12px;
            background: var(--aurora-teal);
            border-radius: 50%;
            box-shadow: 0 0 10px var(--aurora-teal);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 18px;
            padding-left: 5px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -24px;
            top: 6px;
            width: 8px;
            height: 8px;
            background: var(--aurora-pink);
            border-radius: 50%;
            box-shadow: 0 0 8px var(--aurora-pink);
        }

        .timeline-date {
            font-size: 0.85rem;
            color: var(--aurora-pink);
            font-weight: 600;
            margin-bottom: 4px;
        }

        .timeline-title {
            font-family: 'Spectral', serif;
            font-size: 1rem;
            color: var(--snow-white);
            font-style: italic;
        }

        .timeline-period {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 12px 15px;
            margin: 10px 0;
            border-left: 3px solid var(--aurora-purple);
        }

        .timeline-period-text {
            font-size: 0.95rem;
            color: var(--text-muted);
            line-height: 1.5;
        }

        .timeline-photo {
            width: 100%;
            max-width: 200px;
            border-radius: 12px;
            margin-top: 10px;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .timeline-photo:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(255, 107, 157, 0.3);
        }

        /* Photo modal */
        .photo-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            padding: 20px;
        }

        .photo-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .photo-modal img {
            max-width: 100%;
            max-height: 90vh;
            object-fit: contain;
            border-radius: 8px;
        }

        .photo-modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2rem;
            color: white;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .photo-modal-close:hover {
            opacity: 1;
        }

        /* Timeline photo placeholder & caption */
        .timeline-photo-placeholder {
            width: 120px;
            height: 90px;
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.2), rgba(196, 77, 255, 0.2));
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .timeline-photo-placeholder:hover {
            border-color: var(--aurora-pink);
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.3), rgba(196, 77, 255, 0.3));
            transform: scale(1.05);
        }

        .timeline-caption {
            font-size: 0.9rem;
            color: var(--text-muted);
            font-style: italic;
            line-height: 1.5;
            margin-top: 5px;
            padding-left: 5px;
            border-left: 2px solid var(--aurora-pink);
        }

        .timeline-photos-grid {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .timeline-photos-grid .timeline-photo-thumb {
            width: 100px;
            height: 75px;
            object-fit: cover;
        }

        .timeline-photo-thumb {
            width: 120px;
            height: 90px;
            object-fit: cover;
            border-radius: 12px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        .timeline-photo-thumb:hover {
            transform: scale(1.05);
            border-color: var(--aurora-pink);
            box-shadow: 0 8px 20px rgba(255, 107, 157, 0.4);
        }

        /* Distance period special block */
        .timeline-distance-period {
            background: linear-gradient(135deg, rgba(196, 77, 255, 0.15), rgba(77, 195, 255, 0.15));
            border-radius: 16px;
            padding: 20px;
            margin: 10px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .distance-icon {
            font-size: 2.5rem;
            animation: float 3s ease-in-out infinite;
        }

        .distance-text {
            font-family: 'Spectral', serif;
            font-size: 1rem;
            color: var(--snow-soft);
            font-style: italic;
            line-height: 1.6;
        }

        .distance-subtext {
            font-size: 0.85rem;
            color: var(--text-muted);
            display: block;
            margin-top: 5px;
        }

        /* Sparkle cursor effect */
        .cursor-sparkle {
            position: fixed;
            pointer-events: none;
            font-size: 1rem;
            animation: sparkleAway 0.6s ease-out forwards;
            z-index: 9999;
        }

        @keyframes sparkleAway {
            0% {
                transform: scale(1) translate(0, 0);
                opacity: 1;
            }

            100% {
                transform: scale(0) translate(var(--dx), var(--dy));
                opacity: 0;
            }
        }
    </style>
</head>

<body>
    <div class="card-container">
        <!-- Background effects -->
        <div class="aurora"></div>
        <div class="stars" id="stars"></div>
        <div class="snowfall" id="snowfall"></div>
        <div class="fireworks-container" id="fireworks"></div>

        <!-- Screen 1: Welcome -->
        <div class="screen active" id="screen1">
            <div class="welcome-icon">üéÑ</div>
            <h1 class="title-handwritten">–° –ù–æ–≤—ã–º –ì–æ–¥–æ–º, –ª—é–±–∏–º–∞—è!</h1>
            <p class="subtitle">–£ –º–µ–Ω—è –µ—Å—Ç—å –¥–ª—è —Ç–µ–±—è –∫–æ–µ-—á—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ–µ...</p>
            <button class="btn-magic" onclick="startQuest()">–û—Ç–∫—Ä—ã—Ç—å</button>
            <p class="welcome-hint">–¢–µ–±—è –∂–¥—ë—Ç –Ω–µ–±–æ–ª—å—à–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ üíï</p>
        </div>

        <!-- Screen 2: Snowflake Game -->
        <div class="screen" id="screen2">
            <h2 class="title-handwritten" style="font-size: 2rem;">–õ–æ–≤–∏ —Å–Ω–µ–∂–∏–Ω–∫–∏! ‚ùÑÔ∏è</h2>
            <div class="game-header">
                <span class="score-display">‚≠ê <span id="score">0</span> / 5</span>
                <span class="timer-display" id="timer">‚è± 20—Å</span>
            </div>
            <div class="game-area" id="gameArea">
                <!-- Snowflakes will be spawned here -->
            </div>
            <p class="game-instruction">–ù–∞–∂–∏–º–∞–π –Ω–∞ —Å–Ω–µ–∂–∏–Ω–∫–∏, —á—Ç–æ–±—ã —Å–æ–±—Ä–∞—Ç—å –ø–æ–∂–µ–ª–∞–Ω–∏—è!</p>
            <button class="btn-magic" style="margin-top: 15px; font-size: 0.9rem; padding: 8px 20px; opacity: 0.8;"
                onclick="endGame()">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É ‚è©</button>
        </div>

        <!-- Screen 3: Romantic Transition -->
        <div class="screen" id="screen3">
            <div class="transition-content" style="text-align: center; max-width: 320px;">
                <span
                    style="font-size: 4rem; display: block; margin-bottom: 20px; animation: float 3s ease-in-out infinite;">üíï</span>
                <h2 class="title-handwritten" style="font-size: 2rem; margin-bottom: 25px; line-height: 1.3;">
                    –≠—Ç–æ—Ç –≥–æ–¥ —Å—Ç–∞–ª –æ—Å–æ–±–µ–Ω–Ω—ã–º –ø–æ—Ç–æ–º—É —á—Ç–æ —è –≤—Å—Ç—Ä–µ—Ç–∏–ª —Ç–µ–±—è ‚ú®
                </h2>
                <p class="subtitle" style="font-size: 1.1rem; line-height: 1.8; margin-bottom: 30px;">
                    –¢—ã –ø—Ä–∏–Ω–æ—Å–∏—à—å –º–Ω–µ —Ä–∞–¥–æ—Å—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –∏ –∫–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç —Å —Ç–æ–±–æ–π —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–ª—è –º–µ–Ω—è –æ—Å–æ–±–µ–Ω–Ω—ã–º
                </p>
                <button class="btn-magic" onclick="goToMemories()">–ù–∞—à–∏ –º–æ–º–µ–Ω—Ç—ã üí´</button>
            </div>
        </div>

        <!-- Screen 4: Memories -->
        <div class="screen" id="screen4">
            <h2 class="title-handwritten" style="font-size: 2rem;">–ù–∞—à–∏ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è üíñ</h2>

            <div class="timeline-wrapper">
                <div class="timeline">
                    <!-- –ú–∞—Ä—Ç -->
                    <div class="timeline-month">
                        <div class="timeline-month-label">–ú–∞—Ä—Ç 2025</div>

                        <div class="timeline-item">
                            <div class="timeline-date">1 –º–∞—Ä—Ç–∞</div>
                            <div class="timeline-title">–ù–∞—à–µ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ üí´</div>
                            <!-- <img src="photo1.jpg" class="timeline-photo" onclick="openPhoto(this.src)"> -->
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-date">9 –º–∞—Ä—Ç–∞</div>
                            <div class="timeline-title">–ü–æ–∑–¥—Ä–∞–≤–∏–ª —Ç–µ–±—è —Å –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è üéÇ</div>
                        </div>

                        <div class="timeline-period">
                            <div class="timeline-period-text">
                                üéâ –ú–Ω–æ–≥–æ —Ç—É—Å–æ–≤–∞–ª–∏—Å—å –≤ –Ω–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏
                            </div>
                        </div>
                    </div>

                    <!-- –ê–ø—Ä–µ–ª—å -->
                    <div class="timeline-month">
                        <div class="timeline-month-label">–ê–ø—Ä–µ–ª—å 2025</div>

                        <div class="timeline-item">
                            <div class="timeline-date">10 –∞–ø—Ä–µ–ª—è</div>
                            <div class="timeline-title">–ù–∞—à –ø–µ—Ä–≤—ã–π –ø–æ—Ü–µ–ª—É–π üòò</div>
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-date">26 –∞–ø—Ä–µ–ª—è</div>
                            <img src="photos/april-26.jpg" class="timeline-photo-thumb" onclick="openPhoto(this.src)"
                                alt="–§–æ—Ç–æ">
                            <div class="timeline-caption">–ó–¥–µ—Å—å –º—ã –µ—â—ë –Ω–µ –∑–Ω–∞–ª–∏, —á—Ç–æ –Ω–∞—Å –∂–¥—ë—Ç –≤–ø–µ—Ä–µ–¥–∏...</div>
                        </div>
                    </div>

                    <!-- –ú–∞–π -->
                    <div class="timeline-month">
                        <div class="timeline-month-label">–ú–∞–π 2025</div>

                        <div class="timeline-item">
                            <div class="timeline-date">1 –º–∞—è</div>
                            <img src="photos/may-1.jpg" class="timeline-photo-thumb" onclick="openPhoto(this.src)"
                                alt="–§–æ—Ç–æ">
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-date">17 –º–∞—è</div>
                            <img src="photos/may-17.jpg" class="timeline-photo-thumb" onclick="openPhoto(this.src)"
                                alt="–§–æ—Ç–æ">
                            <div class="timeline-caption">–í —ç—Ç–æ—Ç –¥–µ–Ω—å –º—ã –≤–ø–µ—Ä–≤—ã–µ —Å–∫–∞–∑–∞–ª–∏ –¥—Ä—É–≥ –¥—Ä—É–≥—É "—è –ª—é–±–ª—é —Ç–µ–±—è" üíò
                            </div>
                        </div>

                        <div class="timeline-milestone">
                            <div class="milestone-date">27 –º–∞—è</div>
                            <div class="milestone-content">
                                <span class="milestone-icon">üíï</span>
                                <span class="milestone-text">–ù–∞—á–∞–ª–∏ –≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è</span>
                            </div>
                        </div>
                    </div>

                    <!-- –ò—é–Ω—å -->
                    <div class="timeline-month">
                        <div class="timeline-month-label">–ò—é–Ω—å 2025</div>

                        <div class="timeline-item">
                            <div class="timeline-date">4 –∏—é–Ω—è</div>
                            <img src="photos/june-4.jpg" class="timeline-photo-thumb" onclick="openPhoto(this.src)"
                                alt="–§–æ—Ç–æ">
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-date">12 –∏—é–Ω—è</div>
                            <div class="timeline-photos-grid">
                                <img src="photos/june-12-1.jpg" class="timeline-photo-thumb"
                                    onclick="openPhoto(this.src)" alt="–§–æ—Ç–æ">
                                <img src="photos/june-12-2.jpg" class="timeline-photo-thumb"
                                    onclick="openPhoto(this.src)" alt="–§–æ—Ç–æ">
                            </div>
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-date">18 –∏—é–Ω—è</div>
                            <img src="photos/june-18.jpg" class="timeline-photo-thumb" onclick="openPhoto(this.src)"
                                alt="–§–æ—Ç–æ">
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-date">22 –∏—é–Ω—è</div>
                            <img src="photos/june-22.jpg" class="timeline-photo-thumb" onclick="openPhoto(this.src)"
                                alt="–§–æ—Ç–æ">
                        </div>
                    </div>

                    <!-- –ò—é–ª—å-–ê–≤–≥—É—Å—Ç: –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ -->
                    <div class="timeline-month">
                        <div class="timeline-month-label">–ò—é–ª—å ‚Äî –ê–≤–≥—É—Å—Ç 2025</div>

                        <div class="timeline-distance-period">
                            <div class="distance-icon">üíå</div>
                            <div class="distance-text">
                                –û—Ç–Ω–æ—à–µ–Ω–∏—è –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏...<br>
                                <span class="distance-subtext">–ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–ª–∏—Å—å –∏ —Å–æ–∑–≤–∞–Ω–∏–≤–∞–ª–∏—Å—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –∏ —Å
                                    –Ω–µ—Ç–µ—Ä–ø–µ–Ω–∏–µ–º –∂–¥—è–ª–∏ –Ω–∞—à–µ–π –≤—Å—Ç—Ä–µ—á–∏ üíï</span>
                            </div>
                        </div>
                    </div>

                    <!-- –°–µ–Ω—Ç—è–±—Ä—å -->
                    <div class="timeline-month">
                        <div class="timeline-month-label">–°–µ–Ω—Ç—è–±—Ä—å 2025</div>

                        <div class="timeline-item">
                            <div class="timeline-date">9 —Å–µ–Ω—Ç—è–±—Ä—è</div>
                            <img src="photos/sept-9.jpg" class="timeline-photo-thumb" onclick="openPhoto(this.src)"
                                alt="–§–æ—Ç–æ">
                            <div class="timeline-caption">–ù–∞—à–∞ –¥–æ–ª–≥–æ–∂–¥–∞–Ω–Ω–∞—è –≤—Å—Ç—Ä–µ—á–∞ –ø–æ—Å–ª–µ 2 –º–µ—Å—è—Ü–µ–≤ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è ü•πüíû
                            </div>
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-date">11 —Å–µ–Ω—Ç—è–±—Ä—è</div>
                            <img src="photos/sept-11.jpg" class="timeline-photo-thumb" onclick="openPhoto(this.src)"
                                alt="–§–æ—Ç–æ">
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-date">12-14 —Å–µ–Ω—Ç—è–±—Ä—è</div>
                            <div class="timeline-title">–ù–∞—à–µ –ø–µ—Ä–≤–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ üåç</div>
                            <div class="timeline-photos-grid" style="margin-top: 10px;">
                                <img src="photos/sept-trip-1.jpg" class="timeline-photo-thumb"
                                    onclick="openPhoto(this.src)" alt="–§–æ—Ç–æ">
                                <img src="photos/sept-trip-2.jpg" class="timeline-photo-thumb"
                                    onclick="openPhoto(this.src)" alt="–§–æ—Ç–æ">
                                <img src="photos/sept-trip-3.jpg" class="timeline-photo-thumb"
                                    onclick="openPhoto(this.src)" alt="–§–æ—Ç–æ">
                                <img src="photos/sept-trip-4.jpg" class="timeline-photo-thumb"
                                    onclick="openPhoto(this.src)" alt="–§–æ—Ç–æ">
                                <img src="photos/sept-trip-5.jpg" class="timeline-photo-thumb"
                                    onclick="openPhoto(this.src)" alt="–§–æ—Ç–æ">
                                <img src="photos/sept-trip-6.jpg" class="timeline-photo-thumb"
                                    onclick="openPhoto(this.src)" alt="–§–æ—Ç–æ">
                            </div>
                        </div>
                    </div>

                    <!-- –û–∫—Ç—è–±—Ä—å -->
                    <div class="timeline-month">
                        <div class="timeline-month-label">–û–∫—Ç—è–±—Ä—å 2025</div>

                        <div class="timeline-item">
                            <div class="timeline-date">11 –æ–∫—Ç—è–±—Ä—è</div>
                            <img src="photos/oct-11.jpg" class="timeline-photo-thumb" onclick="openPhoto(this.src)"
                                alt="–§–æ—Ç–æ">
                            <div class="timeline-caption">–°—Ö–æ–¥–∏–ª–∏ –≤ –¶–∏—Ä–∫ –¥—é –°–æ–ª–µ–π üé™</div>
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-date">21 –æ–∫—Ç—è–±—Ä—è</div>
                            <img src="photos/oct-21.jpg" class="timeline-photo-thumb" onclick="openPhoto(this.src)"
                                alt="–§–æ—Ç–æ">
                        </div>
                    </div>

                    <!-- –ù–æ—è–±—Ä—å -->
                    <div class="timeline-month">
                        <div class="timeline-month-label">–ù–æ—è–±—Ä—å 2025</div>

                        <div class="timeline-item">
                            <div class="timeline-date">8 –Ω–æ—è–±—Ä—è</div>
                            <img src="photos/nov-8.jpg" class="timeline-photo-thumb" onclick="openPhoto(this.src)"
                                alt="–§–æ—Ç–æ">
                        </div>

                        <div class="timeline-milestone">
                            <div class="milestone-date">27 –Ω–æ—è–±—Ä—è</div>
                            <div class="milestone-content">
                                <span class="milestone-text">–û—Ç–ø—Ä–∞–∑–¥–Ω–æ–≤–∞–ª–∏ 6 –º–µ—Å—è—Ü–µ–≤</span>
                            </div>
                            <img src="photos/nov-27.jpg" class="timeline-photo-thumb"
                                style="width: 100%; height: auto; max-height: 200px;" onclick="openPhoto(this.src)"
                                alt="–§–æ—Ç–æ">
                        </div>
                    </div>

                    <!-- –î–µ–∫–∞–±—Ä—å -->
                    <div class="timeline-month">
                        <div class="timeline-month-label">–î–µ–∫–∞–±—Ä—å 2025</div>

                        <div class="timeline-item">
                            <div class="timeline-date">7 –¥–µ–∫–∞–±—Ä—è</div>
                            <img src="photos/dec-7.jpg" class="timeline-photo-thumb" onclick="openPhoto(this.src)"
                                alt="–§–æ—Ç–æ">
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-date">20 –¥–µ–∫–∞–±—Ä—è</div>
                            <div class="timeline-photos-grid">
                                <img src="photos/dec-20-1.jpg" class="timeline-photo-thumb"
                                    onclick="openPhoto(this.src)" alt="–§–æ—Ç–æ">
                                <img src="photos/dec-20-2.jpg" class="timeline-photo-thumb"
                                    onclick="openPhoto(this.src)" alt="–§–æ—Ç–æ">
                                <img src="photos/dec-20-3.jpg" class="timeline-photo-thumb"
                                    onclick="openPhoto(this.src)" alt="–§–æ—Ç–æ">
                                <img src="photos/dec-20-4.jpg" class="timeline-photo-thumb"
                                    onclick="openPhoto(this.src)" alt="–§–æ—Ç–æ">
                            </div>
                            <div class="timeline-caption">–°—Ö–æ–¥–∏–ª–∏ –Ω–∞ –∫–∞—Ç–æ–∫, –ø—Ä–∏–≥–æ—Ç–æ–≤–∏–ª–∏ —Å—Ç–µ–π–∫, –∏—Å–ø–µ–∫–ª–∏ –ø—Ä—è–Ω–∏–∫–∏ –∏ –≤—ã–ø–∏–ª–∏
                                –≥–ª–∏–Ω—Ç–≤–µ–π–Ω ‚õ∏Ô∏èü•©üç™üç∑</div>
                        </div>
                    </div>

                    <!-- –ë—É–¥—É—â–µ–µ -->
                    <div class="timeline-month" style="margin-top: 40px;">
                        <div class="timeline-future-block"
                            style="text-align: center; padding: 30px 20px; background: linear-gradient(135deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02)); border-radius: 20px; border: 1px solid rgba(255,255,255,0.1);">
                            <span
                                style="font-size: 3rem; display: block; margin-bottom: 15px; animation: float 3s ease-in-out infinite;">üöÄ</span>
                            <h3
                                style="font-family: 'Caveat', cursive; font-size: 1.8rem; color: var(--gold-warm); margin-bottom: 10px;">
                                –î–∞–ª—å—à–µ ‚Äî —Ç–æ–ª—å–∫–æ –ª—É—á—à–µ!</h3>
                        </div>
                    </div>
                </div>
            </div>

            <button class="btn-magic" onclick="goToFinal()">–î–∞–ª—å—à–µ üíï</button>
        </div>

        <!-- Photo Modal -->
        <div class="photo-modal" id="photoModal" onclick="closePhoto()">
            <span class="photo-modal-close">&times;</span>
            <img id="modalPhoto" src="" alt="–§–æ—Ç–æ">
        </div>

        <!-- Screen 5: Final -->
        <div class="screen" id="screen5">
            <div class="final-content">
                <div class="cities-connection">
                    <div class="city-marker">
                        <span class="city-icon">üè∞</span>
                        <span class="city-name">–ü—Ä–∞–≥–∞</span>
                    </div>
                    <div class="connection-line"></div>
                    <div class="city-marker">
                        <span class="city-icon">üé°</span>
                        <span class="city-name">–õ–æ–Ω–¥–æ–Ω</span>
                    </div>
                </div>

                <p class="final-message">
                    –ü—É—Å—Ç—å –Ω–æ–≤—ã–π –≥–æ–¥ –ø—Ä–∏–Ω–µ—Å—ë—Ç —Ç–µ–±–µ<br>
                    –∫–ª–∞—Å—Å–Ω—ã–π –≤–∞–π–±, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ<br>
                    –∏ –º–Ω–æ–≥–æ –ø–æ–≤–æ–¥–æ–≤ —É–ª—ã–±–∞—Ç—å—Å—è ‚ú®<br><br>
                    –û–±–Ω–∏–º–∞—é –∏–∑ –ü—Ä–∞–≥–∏ –∏ –Ω–∞–¥–µ—é—Å—å,<br>
                    —á—Ç–æ —Å–∫–æ—Ä–æ —É–≤–∏–¥–∏–º—Å—è –≤–∂–∏–≤—É—é! üíï
                </p>

                <p class="signature">–° –ª—é–±–æ–≤—å—é –æ—Ç –ù–∞—Å—Ç–∏ üíñ</p>
                <p class="final-year">2026</p>

                <button class="btn-secondary" style="margin-top: 30px;" onclick="restartQuest()">
                    –ü—Ä–æ–π—Ç–∏ –µ—â—ë —Ä–∞–∑ ‚ú®
                </button>
            </div>
        </div>

        <!-- Progress dots -->
        <div class="progress-dots">
            <div class="progress-dot active" data-screen="1"></div>
            <div class="progress-dot" data-screen="2"></div>
            <div class="progress-dot" data-screen="3"></div>
            <div class="progress-dot" data-screen="4"></div>
            <div class="progress-dot" data-screen="5"></div>
        </div>

        <!-- Modal for wish reveal -->
        <div class="modal-overlay" id="wishModal">
            <div class="modal-content">
                <div class="wish-card">
                    <span class="wish-emoji-large" id="modalEmoji">üéÅ</span>
                    <p class="wish-text" id="modalText">–ü–æ–∂–µ–ª–∞–Ω–∏–µ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...</p>
                    <button class="btn-magic" style="margin-top: 25px;" onclick="closeWishModal()">
                        –°–ø–∞—Å–∏–±–æ! ‚ú®
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== STATE =====
        let currentScreen = 1;
        let gameScore = 0;
        let gameTimer = 20;
        let gameInterval = null;
        let spawnInterval = null;
        let giftsOpenedCount = 0;
        let openedGifts = new Set();
        let collectedStars = 0;

        // Wishes for gifts
        const giftWishes = [
            { emoji: 'üíñ', text: '–ü—É—Å—Ç—å –ª—é–±–æ–≤—å –æ–∫—Ä—É–∂–∞–µ—Ç —Ç–µ–±—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å ‚Äî –æ—Ç –±–ª–∏–∑–∫–∏—Ö, –¥—Ä—É–∑–µ–π –∏ –¥–∞–∂–µ –Ω–µ–∑–Ω–∞–∫–æ–º—Ü–µ–≤!' },
            { emoji: '‚ú®', text: '–ü—É—Å—Ç—å –≤—Å–µ —Ç–≤–æ–∏ –º–µ—á—Ç—ã –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º —Ç—ã —É—Å–ø–µ–µ—à—å –∑–∞–≥–∞–¥–∞—Ç—å –Ω–æ–≤—ã–µ!' },
            { emoji: 'üåà', text: '–ü—É—Å—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –ø—Ä–∏–Ω–æ—Å–∏—Ç –º–∞–ª–µ–Ω—å–∫–∏–µ —Ä–∞–¥–æ—Å—Ç–∏ –∏ –±–æ–ª—å—à–∏–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è!' },
            { emoji: 'üçÄ', text: '–ü—É—Å—Ç—å —É–¥–∞—á–∞ —É–ª—ã–±–∞–µ—Ç—Å—è —Ç–µ–±–µ –≤–æ –≤—Å—ë–º ‚Äî –≤ —Ä–∞–±–æ—Ç–µ, –≤ –ª—é–±–≤–∏, –≤ –∂–∏–∑–Ω–∏!' },
            { emoji: 'üåü', text: '–ü—É—Å—Ç—å —Ç—ã —Å–∏—è–µ—à—å —Ç–∞–∫ —è—Ä–∫–æ, —á—Ç–æ –∑–≤—ë–∑–¥—ã –±—É–¥—É—Ç –∑–∞–≤–∏–¥–æ–≤–∞—Ç—å!' },
            { emoji: 'üéâ', text: '–ü—É—Å—Ç—å 2026 —Å—Ç–∞–Ω–µ—Ç —Ç–≤–æ–∏–º —Å–∞–º—ã–º —Å—á–∞—Å—Ç–ª–∏–≤—ã–º –≥–æ–¥–æ–º!' }
        ];

        // Star emojis for collection
        const starEmojis = ['‚≠ê', 'üåü', 'üí´', '‚ú®', 'üå†'];

        // Snowflake emojis
        const snowflakes = ['‚ùÑÔ∏è', '‚ùÖ', '‚ùÜ', '‚úß', '‚ú¶', '‚òÉÔ∏è'];

        // ===== INITIALIZATION =====
        function init() {
            createStars();
            createSnowfall();
            setupCursorSparkles();
        }

        // Create background stars
        function createStars() {
            const container = document.getElementById('stars');
            for (let i = 0; i < 60; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 60 + '%';
                star.style.width = (Math.random() * 3 + 1) + 'px';
                star.style.height = star.style.width;
                star.style.setProperty('--duration', (Math.random() * 3 + 2) + 's');
                star.style.setProperty('--delay', Math.random() * 3 + 's');
                container.appendChild(star);
            }
        }

        // Create background snowfall
        function createSnowfall() {
            const container = document.getElementById('snowfall');
            for (let i = 0; i < 40; i++) {
                const snow = document.createElement('div');
                snow.className = 'snow-particle';
                snow.textContent = ['¬∑', '‚Ä¢', '‚úß'][Math.floor(Math.random() * 3)];
                snow.style.left = Math.random() * 100 + '%';
                snow.style.animationDuration = (Math.random() * 10 + 10) + 's';
                snow.style.animationDelay = Math.random() * 10 + 's';
                snow.style.setProperty('--size', (Math.random() * 0.8 + 0.4) + 'rem');
                container.appendChild(snow);
            }
        }

        // Cursor sparkles
        function setupCursorSparkles() {
            document.addEventListener('click', (e) => {
                createSparkleAt(e.clientX, e.clientY);
            });
        }

        function createSparkleAt(x, y) {
            const sparkles = ['‚ú®', '‚≠ê', 'üí´', '‚úß'];
            for (let i = 0; i < 3; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'cursor-sparkle';
                sparkle.textContent = sparkles[Math.floor(Math.random() * sparkles.length)];
                sparkle.style.left = x + 'px';
                sparkle.style.top = y + 'px';
                sparkle.style.setProperty('--dx', (Math.random() - 0.5) * 60 + 'px');
                sparkle.style.setProperty('--dy', (Math.random() - 0.5) * 60 + 'px');
                document.body.appendChild(sparkle);
                setTimeout(() => sparkle.remove(), 600);
            }
        }

        // ===== SCREEN NAVIGATION =====
        function goToScreen(num) {
            const currentEl = document.getElementById('screen' + currentScreen);
            const nextEl = document.getElementById('screen' + num);

            currentEl.classList.remove('active');

            setTimeout(() => {
                nextEl.classList.add('active');
                currentScreen = num;
                updateProgressDots();
            }, 300);
        }

        function updateProgressDots() {
            document.querySelectorAll('.progress-dot').forEach((dot, index) => {
                dot.classList.remove('active', 'completed');
                if (index + 1 === currentScreen) {
                    dot.classList.add('active');
                } else if (index + 1 < currentScreen) {
                    dot.classList.add('completed');
                }
            });
        }

        // ===== SCREEN 1: Start Quest =====
        function startQuest() {
            goToScreen(2);
            setTimeout(startGame, 500);
        }

        // ===== SCREEN 2: Snowflake Game =====
        function startGame() {
            gameScore = 0;
            gameTimer = 20;
            updateScore();
            updateTimer();

            // Start spawning snowflakes
            spawnInterval = setInterval(spawnSnowflake, 800);

            // Start timer
            gameInterval = setInterval(() => {
                gameTimer--;
                updateTimer();

                if (gameTimer <= 0 || gameScore >= 5) {
                    endGame();
                }
            }, 1000);
        }

        function spawnSnowflake() {
            if (gameScore >= 5) return;

            const gameArea = document.getElementById('gameArea');
            const snowflake = document.createElement('div');
            snowflake.className = 'catchable-snowflake';
            snowflake.textContent = snowflakes[Math.floor(Math.random() * snowflakes.length)];
            snowflake.style.left = (Math.random() * 80 + 10) + '%';
            snowflake.style.animationDuration = (Math.random() * 3 + 3) + 's';

            snowflake.onclick = (e) => {
                e.stopPropagation();
                catchSnowflake(snowflake);
            };

            gameArea.appendChild(snowflake);

            // Remove after animation
            setTimeout(() => {
                if (snowflake.parentNode) {
                    snowflake.remove();
                }
            }, 6000);
        }

        function catchSnowflake(el) {
            if (gameScore >= 5) return;

            gameScore++;
            updateScore();

            // Create caught effect
            const effect = document.createElement('div');
            effect.className = 'caught-effect';
            effect.textContent = '+‚≠ê';
            effect.style.left = el.style.left;
            effect.style.top = el.offsetTop + 'px';
            document.getElementById('gameArea').appendChild(effect);

            el.remove();

            setTimeout(() => effect.remove(), 800);

            if (gameScore >= 5) {
                endGame();
            }
        }

        function updateScore() {
            document.getElementById('score').textContent = gameScore;
        }

        function updateTimer() {
            document.getElementById('timer').textContent = '‚è± ' + gameTimer + '—Å';
        }

        function endGame() {
            clearInterval(gameInterval);
            clearInterval(spawnInterval);

            // Clean up remaining snowflakes
            document.querySelectorAll('.catchable-snowflake').forEach(s => s.remove());

            // Proceed to next screen
            setTimeout(() => goToScreen(3), 1000);
        }

        // ===== SCREEN 3: Romantic Transition =====
        function goToMemories() {
            goToScreen(4);
        }

        // ===== SCREEN 4: Memories =====
        function openPhoto(src) {
            document.getElementById('modalPhoto').src = src;
            document.getElementById('photoModal').classList.add('active');
        }

        function closePhoto() {
            document.getElementById('photoModal').classList.remove('active');
        }

        function createCelebration() {
            const container = document.getElementById('fireworks');
            const colors = ['#ff6b9d', '#c44dff', '#4dc3ff', '#4dffd2', '#ffd700'];

            for (let burst = 0; burst < 5; burst++) {
                setTimeout(() => {
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * (window.innerHeight / 2) + 100;

                    for (let i = 0; i < 20; i++) {
                        const particle = document.createElement('div');
                        particle.className = 'firework-particle';
                        particle.style.left = x + 'px';
                        particle.style.top = y + 'px';
                        particle.style.background = colors[Math.floor(Math.random() * colors.length)];

                        const angle = (i / 20) * Math.PI * 2;
                        const velocity = 50 + Math.random() * 50;
                        particle.style.setProperty('--dx', Math.cos(angle) * velocity + 'px');
                        particle.style.setProperty('--dy', Math.sin(angle) * velocity + 'px');

                        container.appendChild(particle);
                        setTimeout(() => particle.remove(), 1500);
                    }
                }, burst * 300);
            }
        }

        // ===== SCREEN 5: Final =====
        function goToFinal() {
            goToScreen(5);
            setTimeout(() => createCelebration(), 500);
        }

        function restartQuest() {
            // Reset all state
            currentScreen = 1;
            gameScore = 0;
            gameTimer = 20;
            giftsOpenedCount = 0;
            openedGifts.clear();
            collectedStars = 0;

            // Reset UI
            document.getElementById('score').textContent = '0';
            document.getElementById('timer').textContent = '‚è± 20—Å';
            document.getElementById('giftsOpened').textContent = '0';
            document.querySelectorAll('.gift-box').forEach(box => box.classList.remove('opened'));
            document.querySelectorAll('.star-slot').forEach(slot => {
                slot.classList.remove('filled');
                slot.textContent = '';
            });
            document.getElementById('luckFill').style.width = '0%';
            document.getElementById('collectStarsBtn').style.display = 'none';

            // Navigate
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('screen1').classList.add('active');
            updateProgressDots();
        }

        // Initialize on load
        init();
    </script>
</body>

</html>